<!-- Add Tesla Logo at the top of the auth page and dashboard -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tesla Stock Trading</title>

  <!-- Tesla Logo Favicon & Home Screen Icon -->
  <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/e/e8/Tesla_logo.png" type="image/png" />
  <link rel="apple-touch-icon" href="https://upload.wikimedia.org/wikipedia/commons/e/e8/Tesla_logo.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Tesla Stock" />
  <meta name="theme-color" content="#cc0000" />

  <!-- Inline Manifest -->
  <script type="application/json" id="inline-manifest">
    {
      "name": "Tesla Stock Trading",
      "short_name": "TeslaTrade",
      "start_url": ".",
      "display": "standalone",
      "background_color": "#ffffff",
      "theme_color": "#cc0000",
      "icons": [
        {
          "src": "https://upload.wikimedia.org/wikipedia/commons/e/e8/Tesla_logo.png",
          "sizes": "192x192",
          "type": "image/png"
        },
        {
          "src": "https://upload.wikimedia.org/wikipedia/commons/e/e8/Tesla_logo.png",
          "sizes": "512x512",
          "type": "image/png"
        }
      ]
    }
  </script>

  <script>
    // Inject manifest dynamically
    const manifest = document.getElementById('inline-manifest').textContent;
    const blob = new Blob([manifest], { type: 'application/json' });
    const manifestURL = URL.createObjectURL(blob);
    const link = document.createElement('link');
    link.rel = 'manifest';
    link.href = manifestURL;
    document.head.appendChild(link);

    // Register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js').catch(console.error);
    }
  </script>

  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #fff;
      color: #333;
    }

    .tesla-logo-bar {
      width: 100%;
      text-align: center;
      margin-bottom: 24px;
    }
    .tesla-logo-bar img {
      width: 120px;
      height: auto;
      margin-top: 18px;
      margin-bottom: 10px;
    }
    .tesla-logo-bar .company-name {
      font-weight: bold;
      font-size: 1.5em;
      color: #cc0000;
      letter-spacing: 2px;
    }

    header {
      background-color: #cc0000;
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      border-bottom: 4px solid #900;
      font-weight: bold;
    }

    .auth-page {
      max-width: 500px;
      margin: 50px auto;
      padding: 30px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #f9f9f9;
      box-shadow: 0px 0px 14px #eee;
    }
    .auth-choice {
      display: flex;
      justify-content: space-between;
      margin-bottom: 24px;
    }
    .auth-choice button {
      width: 48%;
      padding: 12px;
      background-color: #cc0000;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    .auth-section {
      display: none;
    }
    .auth-section.active {
      display: block;
    }
    .auth-section h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .auth-section input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .auth-section label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
      color: #cc0000;
    }
    .auth-section button {
      width: 100%;
      padding: 12px;
      background-color: #cc0000;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    .spin-modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    .spin-content {
      background: #fff;
      padding: 32px 24px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 0 20px #cc0000;
      max-width: 350px;
      width: 95%;
      animation: popin 0.5s;
    }
    @keyframes popin {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .spin-wheel {
      margin: 18px auto;
      width: 210px; height: 210px;
      border-radius: 50%;
      border: 6px solid #cc0000;
      background: repeating-conic-gradient(
        #ffe0e0 0deg 72deg, #fff 72deg 144deg, #ffe0e0 144deg 216deg, #fff 216deg 288deg, #ffe0e0 288deg 360deg
      );
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 1.2em;
      color: #cc0000;
      position: relative;
    }
    .spin-arrow {
      position: absolute;
      top: -26px; left: 50%; transform: translateX(-50%);
      font-size: 2em;
      color: #cc0000;
    }
    .spin-prize {
      margin-top: 15px;
      font-size: 1.1em;
      font-weight: bold;
      color: #333;
    }
    .error-msg {
      color: #cc0000;
      background: #fff3f3;
      border-radius: 4px;
      padding: 8px;
      margin-bottom: 8px;
      text-align: center;
      font-size: 1em;
      display: none;
    }
    .footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9em;
      color: #666;
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <div id="authPage" class="auth-page">
    <div class="tesla-logo-bar">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/e8/Tesla_logo.png" alt="Tesla Logo" />
      <div class="company-name">TESLA COMPANY</div>
    </div>
    <div class="auth-choice">
      <button onclick="showAuth('register')">Register Account</button>
      <button onclick="showAuth('login')">Already Registered? Login</button>
    </div>

    <div id="regSection" class="auth-section active">
      <h2>Register for Tesla Private Trading</h2>
      <div id="regError" class="error-msg"></div>
      <form onsubmit="event.preventDefault(); register();">
        <label for="regFullName">Full Name</label>
        <input type="text" id="regFullName" placeholder="Full Name" required />
        <label for="regUsername">Username</label>
        <input type="text" id="regUsername" placeholder="Username" required />
        <label for="regEmail">Email</label>
        <input type="email" id="regEmail" placeholder="Email" required />
        <label for="regPhone">Phone</label>
        <input type="tel" id="regPhone" placeholder="Phone Number" required />
        <label for="regPassword">Password</label>
        <input type="password" id="regPassword" placeholder="Password" required />
        <label for="regReferral">Tesla Private Referral ID</label>
        <input type="text" id="regReferral" placeholder="Referral ID" required />
        <button type="submit">Register</button>
      </form>
    </div>

    <div id="loginSection" class="auth-section">
      <h2>Login to Your Tesla Account</h2>
      <div id="loginError" class="error-msg"></div>
      <form onsubmit="event.preventDefault(); login();">
        <label for="loginUsername">Username</label>
        <input type="text" id="loginUsername" placeholder="Username" required />
        <label for="loginPassword">Password</label>
        <input type="password" id="loginPassword" placeholder="Password" required />
        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <div id="dashboard" style="display:none;">
    <div class="tesla-logo-bar">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/e8/Tesla_logo.png" alt="Tesla Logo" />
      <div class="company-name">TESLA COMPANY</div>
    </div>
    <header>
      <div>üë§ <span id="userDisplay"></span></div>
      <div>üí∞ Balance: $10,000</div>
      <div>üì¶ Orders: 5</div>
      <div>üßë‚Äçüíº Jobs: 3</div>
      <div>‚≠ê Level: Pro</div>
    </header>

    <div class="dashboard">
      <div class="banner">
        <h1>Join Tesla Stock Trading to Earn $8,000 Weekly</h1>
        <button onclick="window.open('https://web3autotrades.cc', '_blank')">Join Now</button>
      </div>

      <div class="gallery">
        <img src="Screenshot_20250818_023650_WhatsApp.jpg" alt="Model X" />
        <img src="Screenshot_20250818_023638_WhatsApp.jpg" alt="Model 3" />
        <img src="Screenshot_20250818_023626_WhatsApp.jpg" alt="Model Y" />
      </div>

      <div class="jobs">
        <div class="job-card">
          <strong>Software Engineer</strong><br />
          Salary: $120,000/year<br />
          <button onclick="applyJob()">Apply</button>
        </div>
        <div class="job-card">
          <strong>Battery Technician</strong><br />
          Salary: $80,000/year<br />
          <button onclick="applyJob()">Apply</button>
        </div>
        <div class="job-card">
          <strong>Sales Executive</strong><br />
          Salary: $70,000/year<br />
          <button onclick="applyJob()">Apply</button>
        </div>
      </div>
    </div>

    <div class="footer">
      Tesla Licence ¬Æ 2025
    </div>
  </div>

  <!-- Spin Modal -->
  <div id="spinModal" class="spin-modal">
    <div class="spin-content">
      <div class="spin-arrow">‚ñ≤</div>
      <div class="spin-wheel" id="spinWheel">
        <!-- Wheel slices will be rendered here -->
      </div>
      <div class="spin-prize" id="spinPrize"></div>
      <button id="spinBtn" onclick="spinTheWheel()">Spin</button>
    </div>
  </div>

  <script>
    // In-memory "database" for demo (use backend for production!)
    let users = {};
    let currentUser = null;
    const TESLA_REF_ID = "962081";
    const spinItems = [
      "CYBER TRUCK",
      "$50,000 BTC",
      "WORKER LICENSE",
      "TAX REFUND",
      "$4,000 WEB3 TRADE COUPONS"
    ];

    // UI Switching
    function showAuth(section) {
      document.getElementById('regSection').classList.remove('active');
      document.getElementById('loginSection').classList.remove('active');
      if (section === 'register') {
        document.getElementById('regSection').classList.add('active');
      } else {
        document.getElementById('loginSection').classList.add('active');
      }
      document.getElementById('regError').style.display = "none";
      document.getElementById('loginError').style.display = "none";
    }

    // Registration
    function register() {
      // Gather info
      const fullName = document.getElementById("regFullName").value.trim();
      const username = document.getElementById("regUsername").value.trim();
      const email = document.getElementById("regEmail").value.trim().toLowerCase();
      const phone = document.getElementById("regPhone").value.trim();
      const password = document.getElementById("regPassword").value;
      const refID = document.getElementById("regReferral").value.trim();
      const errorDiv = document.getElementById('regError');
      errorDiv.style.display = 'none';

      // Validate
      if (!fullName || !username || !email || !phone || !password || !refID) {
        errorDiv.textContent = "All fields are required.";
        errorDiv.style.display = 'block';
        return;
      }
      if (refID !== TESLA_REF_ID) {
        errorDiv.textContent = "TESLA IS A PRIVATE COMPANY. You need the special ID to register.";
        errorDiv.style.display = 'block';
        return;
      }
      if (users[username] || Object.values(users).some(u => u.email === email)) {
        errorDiv.textContent = "This username or email has already been registered.";
        errorDiv.style.display = 'block';
        return;
      }

      // Save user (pretend DB)
      users[username] = {
        fullName, username, email, phone, password, refID
      };
      currentUser = users[username];

      // Success - go to dashboard and spin modal
      document.getElementById("authPage").style.display = "none";
      document.getElementById("dashboard").style.display = "block";
      updateDashboardUser();
      showSpinModal();
    }

    // Login
    function login() {
      const username = document.getElementById("loginUsername").value.trim();
      const password = document.getElementById("loginPassword").value;
      const errorDiv = document.getElementById('loginError');
      errorDiv.style.display = 'none';

      if (!username || !password) {
        errorDiv.textContent = "Please enter both username and password.";
        errorDiv.style.display = 'block';
        return;
      }
      if (users[username] && users[username].password === password) {
        currentUser = users[username];
        document.getElementById("authPage").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        updateDashboardUser();
        showSpinModal();
      } else {
        errorDiv.textContent = "Invalid login credentials.";
        errorDiv.style.display = 'block';
      }
    }

    function updateDashboardUser() {
      document.getElementById("userDisplay").textContent =
        `${currentUser.fullName} (${currentUser.username})`;
    }

    // Job Apply
    function applyJob() {
      window.open("https://wa.me/qr/W4BIEGPNPIZDH1", "_blank");
    }

    // Spin Modal Logic
    let spinIndex = 0;
    let spinning = false;

    function showSpinModal() {
      spinIndex = 0;
      spinning = false;
      document.getElementById("spinModal").style.display = "flex";
      document.getElementById("spinPrize").textContent = "";
      document.getElementById("spinBtn").disabled = false;
      renderWheel();
    }

    function spinTheWheel() {
      if (spinning) return;
      spinning = true;
      document.getElementById("spinBtn").disabled = true;
      // Simulate spinning by cycling items
      let cycles = 12 + Math.floor(Math.random() * 4); // random-ish
      let finalIndex = spinItems.length - 1; // Always land on Trade Coupons
      let i = 0;

      function animateSpin() {
        let item = spinItems[i % spinItems.length];
        document.getElementById("spinWheel").textContent = item;
        i++;
        if (i < cycles) {
          setTimeout(animateSpin, 80 + i*8);
        } else {
          // Stop at final prize
          document.getElementById("spinWheel").textContent = spinItems[finalIndex];
          document.getElementById("spinPrize").textContent =
            `$4,000 WEB3 TRADE COUPONS will be added to your TRADE ACCOUNT once you activate it.`;
          setTimeout(() => {
            document.getElementById("spinModal").style.display = "none";
          }, 3500);
        }
      }
      animateSpin();
    }

    function renderWheel() {
      document.getElementById("spinWheel").textContent = spinItems[0];
      document.getElementById("spinPrize").textContent = "Spin to win your welcome prize!";
      document.getElementById("spinBtn").disabled = false;
    }

    // Show registration as default
    showAuth('register');
  </script>
</body>
</html>
